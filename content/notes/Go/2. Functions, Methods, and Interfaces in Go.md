---
title: Go语言中的函数、方法、接口
date: 2025-12-2
tags: [go,学习笔记]
cover: /covers/go/golang-banner.png
---

# Functions, Methods, and Interfaces in Go

> Go 语言核心抽象能力整理版

---

## 1. 函数 Functions

### 定义与调用

```go
func add(x, y int) int {
    return x + y
}
```

### 多返回值

```go
func div(a, b int) (int, error) {
    if b == 0 {
        return 0, errors.New("division by zero")
    }
    return a / b, nil
}
```

---

## 2. 参数传递：值 vs 指针

- Go **只有值传递**
- 指针传递的是“地址的值”

```go
func inc(p *int) {
    *p++
}
```

---

## 3. Slice / Map 作为参数

- slice / map 是引用语义
- 函数内修改会影响外部

```go
func modify(s []int) {
    s[0] = 100
}
```

---

## 4. 函数是一等公民

```go
func apply(f func(int) int, x int) int {
    return f(x)
}
```

- 可作为参数
- 可作为返回值

---

## 5. 匿名函数与闭包

```go
func counter() func() int {
    x := 0
    return func() int {
        x++
        return x
    }
}
```

闭包 = 函数 + 环境

---

## 6. 可变参数（Variadic）

```go
func sum(nums ...int) int {
    total := 0
    for _, v := range nums {
        total += v
    }
    return total
}
```

---

## 7. defer

- 延迟执行
- LIFO 顺序

```go
f, _ := os.Open("a.txt")
defer f.Close()
```

---

## 8. 方法 Methods

```go
type Point struct { x, y float64 }

func (p Point) Dist() float64 {
    return math.Sqrt(p.x*p.x + p.y*p.y)
}
```

---

## 9. 指针接收者

```go
func (p *Point) Move(dx float64) {
    p.x += dx
}
```

**原则：**
- 需要修改 → 指针接收者
- 大结构体 → 指针接收者

---

## 10. 接口 Interfaces

```go
type Shape interface {
    Area() float64
}
```

- 实现即满足
- 无需显式 implements

---

## 11. 多态 Polymorphism

```go
func printArea(s Shape) {
    fmt.Println(s.Area())
}
```

---

## 12. 接口内部结构

接口值 =
- 动态类型
- 动态值

```go
var s Shape
s = (*Circle)(nil) // 动态类型存在，值为 nil
```

---

## 13. 类型断言

```go
v, ok := s.(*Circle)
```

---

## 14. 错误处理

- 无异常
- 显式返回 error

```go
if err != nil {
    return err
}
```

---

## 本章总结

- 函数是抽象核心
- 方法 + 接口 = Go 的 OOP
- 接口驱动设计是 Go 的灵魂


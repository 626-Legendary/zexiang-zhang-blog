---
title: 1. 操作系统概述
date: 2025-12-18
tags: [Operating Systems,学习笔记,]
cover: /covers/操作系统原理/北京大学/banner.png
---

# 操作系统概述（Lecture 1 笔记）

> 目录

1. 操作系统做了什么
2. 操作系统的定义和作用
3. 操作系统的主要特征
4. 典型操作系统的架构
5. 操作系统分类1
6. 操作系统分类2

---

## 一、操作系统做了什么（以 Hello World 为例）

### 1. 程序启动与执行流程

1. **用户发起执行请求**

   * 命令行输入 / 双击程序图标
2. **操作系统定位并检查程序**

   * 在磁盘中找到可执行文件
   * 校验是否为可执行格式

     * Windows：PE
     * Linux：ELF
3. **创建进程**

   * OS 创建进程控制块（PCB）
   * 将可执行文件映射到进程地址空间
4. **调度与上下文切换**

   * 调度器选中该进程
   * 设置 CPU 上下文，开始执行

### 2. 内存与缺页异常（Page Fault）

* 程序首次执行时：

  * 代码/数据尚未在内存中
  * 触发 **缺页异常** → 控制权交给 OS
* OS 行为：

  * 分配空闲物理页
  * 从磁盘加载程序页面
  * 恢复程序执行
* 程序较大 → 可能多次缺页

### 3. 系统调用（以 puts 为例）

* `puts` 本质是 **系统调用**
* 执行流程：

  * 用户态 → 内核态
  * OS 确定输出设备（显示器）
  * 窗口系统将字符 → 像素
  * 显示硬件输出到屏幕

### 4. 核心结论

* 用户程序执行过程中：

  * **频繁在用户态 ↔ 内核态切换**
* OS 负责：

  * 程序启动
  * 内存管理
  * I/O 支持
  * 调度与异常处理

---

## 二、操作系统的定义与作用

### 1. 操作系统的定义

> 操作系统是计算机系统中的**系统软件**，由多个模块协作完成：

* **有效、合理地管理软硬件资源**
* **控制程序执行流程并提供服务**
* **为用户提供方便、统一的接口**

### 2. 关键词解读

* **有效**：提高资源利用率（CPU / 内存 / 磁盘 / 设备）
* **合理**：公平、避免资源浪费与冲突
* **方便**：

  * 用户接口（命令行 / GUI）
  * 编程接口（系统调用 / API）

### 3. 操作系统的三大作用（重点）

#### （1）资源管理者（自底向上）

* 管理对象：

  * CPU、内存、磁盘、I/O 设备
  * 文件、目录等软件资源

**资源管理的一般过程：**

1. 用数据结构记录资源状态（如位示图 bitmap）
2. 采用资源分配策略

   * 静态分配：执行前一次性分配（浪费大）
   * 动态分配（主流）：按需申请
3. 实施分配与回收
4. 提高利用率 + 冲突协调 + 资源保护

#### （2）系统服务提供者

* 典型服务：

  * 进程创建与执行
  * 文件/目录操作
  * I/O 操作
  * 系统状态与统计信息

#### （3）硬件的扩展（虚拟机）

* OS 是硬件之上的第一层软件
* **屏蔽硬件细节，提供抽象接口**
* 提高：

  * 可移植性
  * 易用性

> 类比：操作系统 ≈ 房屋装修公司

---

## 三、操作系统的四大特征（高频考点）

### 1. 并发（Concurrency）

* 能处理多个同时存在的活动
* 单 CPU：

  * 宏观并行
  * 微观串行（轮流执行）
* 带来的问题：

  * 上下文切换
  * 内存保护
  * 同步与互斥

📌 **并发 vs 并行**

* 并发：逻辑同时（单 CPU）
* 并行：物理同时（多 CPU / 多硬件）

### 2. 共享（Sharing）

* 多个进程共同使用有限资源

**两种共享方式：**

* 互斥共享：打印机
* 同时共享：磁盘、只读代码段

问题：

* 资源分配优化
* 冲突与保护

### 3. 虚拟（Virtualization）

* 一个物理实体 → 多个逻辑实体
* 目的：**提高资源利用率**

典型虚拟：

* CPU → 虚拟 CPU（分时）
* 内存 → 虚拟地址空间
* 显示设备 → 多窗口 / 虚拟终端

### 4. 随机（Asynchrony）

* 事件发生顺序不可预测
* 结果：

  * 进程执行速度不可预知
  * 系统错误难以复现
  * 调试困难

---

## 四、典型操作系统架构（了解层次即可）

### 1. Windows 架构

* 用户态 / 内核态
* 内核态主要模块：

  * HAL（硬件抽象层）
  * Kernel（调度、中断、异常）
  * 执行体（进程、内存、I/O、安全）
  * 设备驱动
  * 图形与窗口系统
* 系统调用经 NTDLL → 内核

### 2. UNIX 架构

* 硬件 → 内核 → 系统调用 → Shell/库
* 内核功能：

  * 进程控制与调度
  * 存储管理
  * 文件系统
  * 设备驱动（块 / 字符）

### 3. Linux 架构

* 单体内核（模块化）
* 包含：

  * 进程/调度
  * 虚存 & 物理内存管理
  * 文件系统
  * 网络子系统
  * 中断 / 异常处理

### 4. Android 架构

* Linux 内核
* 系统库 + 运行时
* 应用框架
* 应用程序

---

## 五、操作系统的分类（按发展阶段）

### 1. 批处理操作系统

**目标：**

* 提高资源利用率
* 提高吞吐量

**特点：**

* 用户不可交互
* 作业成批处理

#### 单道 vs 多道批处理

* 单道：一次一个作业
* 多道：内存中多个作业

### 2. SPOOLing 技术（重点）

> Simultaneous Peripheral Operation On-Line

* 磁盘作为输入/输出缓冲
* 输入、计算、输出并行

**四个任务：**

1. 输入 → 输入井
2. 作业调度
3. 作业执行 → 输出井
4. 输出进程 → 设备

📌 现代应用：打印队列

### 3. 分时操作系统

* 多终端共享主机
* 时间片轮转

**目标：**

* 响应时间短
* 强交互性

### 4. 实时操作系统（RTOS）

* 严格时间约束

**分类：**

* 硬实时：绝对时间保证（工业控制）
* 软实时：允许偶尔超时（音视频）

### 5. 其他类型

* 网络操作系统：通信 + 资源共享
* 分布式操作系统：多机协作、透明性
* 嵌入式操作系统：设备控制、实时性
* 智能卡操作系统：

  * 能耗低
  * 存储小
  * 功能单一

---

## 六、本讲总结（老师明确要求掌握）

* 操作系统的**定义**
* 操作系统的**三大作用**
* 操作系统的**四大特征**：

  * 并发 / 共享 / 虚拟 / 随机
* **SPOOLing 技术原理与应用**
* Windows / Linux / UNIX 架构基本认识
* 操作系统的主要分类

